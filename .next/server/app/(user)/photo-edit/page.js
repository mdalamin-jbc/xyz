(()=>{var e={};e.id=9477,e.ids=[9477],e.modules={443:(e,t,s)=>{"use strict";s.d(t,{MX:()=>i,fX:()=>r,m$:()=>l,zP:()=>n});let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),i=e=>{let t=a(e);return t.charAt(0).toUpperCase()+t.slice(1)},n=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim(),l=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6727:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(41552).A)("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]])},10197:()=>{},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},24624:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(43210),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},i=s(443);let n=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:l="",children:o,iconNode:d,...c},m)=>(0,r.createElement)("svg",{ref:m,...a,width:t,height:t,stroke:e,strokeWidth:n?24*Number(s)/Number(t):s,className:(0,i.zP)("lucide",l),...!o&&!(0,i.m$)(c)&&{"aria-hidden":"true"},...c},[...d.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(o)?o:[o]]))},25806:()=>{},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31568:(e,t,s)=>{Promise.resolve().then(s.bind(s,45131))},33873:e=>{"use strict";e.exports=require("path")},41296:(e,t,s)=>{Promise.resolve().then(s.bind(s,58252))},41552:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(43210),a=s(443),i=s(24624);let n=(e,t)=>{let s=(0,r.forwardRef)(({className:s,...n},l)=>(0,r.createElement)(i.A,{ref:l,iconNode:t,className:(0,a.zP)(`lucide-${(0,a.fX)((0,a.MX)(e))}`,`lucide-${e}`,s),...n}));return s.displayName=(0,a.MX)(e),s}},43064:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var r=s(65239),a=s(48088),i=s(88170),n=s.n(i),l=s(30893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d={children:["",{children:["(user)",{children:["photo-edit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,45131)),"/home/roushan-sheik/Projects/Office /project-xyz/1-jul/xyz/src/app/(user)/photo-edit/page.tsx"]}]},{}]},{"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,35286)),"/home/roushan-sheik/Projects/Office /project-xyz/1-jul/xyz/src/app/layout.tsx"],loading:[()=>Promise.resolve().then(s.bind(s,67393)),"/home/roushan-sheik/Projects/Office /project-xyz/1-jul/xyz/src/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/roushan-sheik/Projects/Office /project-xyz/1-jul/xyz/src/app/(user)/photo-edit/page.tsx"],m={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(user)/photo-edit/page",pathname:"/photo-edit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},45131:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/roushan-sheik/Projects/Office /project-xyz/1-jul/xyz/src/app/(user)/photo-edit/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/roushan-sheik/Projects/Office /project-xyz/1-jul/xyz/src/app/(user)/photo-edit/page.tsx","default")},53038:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return a}});let r=s(43210);function a(e,t){let s=(0,r.useRef)(null),a=(0,r.useRef)(null);return(0,r.useCallback)(r=>{if(null===r){let e=s.current;e&&(s.current=null,e());let t=a.current;t&&(a.current=null,t())}else e&&(s.current=i(e,r)),t&&(a.current=i(t,r))},[e,t])}function i(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let s=e(t);return"function"==typeof s?s:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},58252:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var r=s(60687),a=s(43210),i=s(27605),n=s(63442);s(10197);var l=s(30474),o=s(2643),d=s(35879),c=s(9275);let m=c.z.object({template:c.z.string().optional(),images:c.z.object({image1:c.z.any().refine(e=>e&&e.length>0,"画像1を選択してください"),image2:c.z.any().optional(),image3:c.z.any().optional()}),processingContent:c.z.string().min(1,"加工内容の詳細を入力してください"),referenceInfo:c.z.string().optional(),completionDate:c.z.string().min(1,"納品希望日を入力してください")});var u=s(83107),p=s(93853);s(25806);var h=s(92740),x=s(6727);function f(){let[e,t]=(0,a.useState)({}),[s,c]=(0,a.useState)("form"),[f,g]=(0,a.useState)([]),[b,j]=(0,a.useState)(!1),[v,y]=(0,a.useState)(null),{register:w,handleSubmit:N,formState:{errors:_},setValue:k,clearErrors:P,reset:z}=(0,i.mN)({resolver:(0,n.u)(m),defaultValues:{template:"default"}}),A=async e=>{try{let s=new FormData;s.append("description",e.processingContent),s.append("special_note",e.referenceInfo||""),s.append("desire_delivery_date",e.completionDate?new Date(e.completionDate).toISOString():""),e.images?.image1?.[0]&&s.append("request_files",e.images.image1[0]),e.images?.image2?.[0]&&s.append("request_files",e.images.image2[0]),e.images?.image3?.[0]&&s.append("request_files",e.images.image3[0]),await u.X.userPhotoEditRequests(s),p.oR.success("依頼が正常に送信されました！"),z(),t({})}catch(e){console.error("Failed to submit photo edit request:",e),p.oR.error("依頼の送信に失敗しました。もう一度お試しください。")}},C=(e,s)=>{if(s&&s.length>0){let r=s[0];k(`images.${e}`,s),P(`images.${e}`);let a=new FileReader;a.onload=s=>{t(t=>({...t,[e]:s.target?.result}))},a.readAsDataURL(r)}},q=e=>{k(`images.${e}`,void 0),t(t=>({...t,[e]:void 0}))},D=e=>{let t=_.images?.[e];if(t&&"object"==typeof t&&"message"in t)return t.message},M=async()=>{j(!0),y(null);try{let e=await u.X.getUserPhotoEditRequests();g(Array.isArray(e)?e:Array.isArray(e.results)?e.results:[])}catch(e){y(e.message||"依頼一覧の取得に失敗しました")}finally{j(!1)}};return(0,r.jsxs)("div",{className:"main_gradient_bg",children:[(0,r.jsx)(d.A,{text:"アリバイ写真加工",position:"left",className:"pl-10"}),(0,r.jsx)("div",{className:"main-gradient-bg min-h-screen p-4",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsx)("div",{className:"text-center mb-8",children:(0,r.jsxs)("div",{className:"flex justify-center gap-4 mb-6",children:[(0,r.jsx)(o.A,{variant:"form"===s?"glassSec":"glass",className:"w-full",type:"button",onClick:()=>c("form"),children:"新規依頼"}),(0,r.jsx)(o.A,{variant:"list"===s?"glassSec":"glass",className:"w-full",type:"button",onClick:async()=>{c("list"),M()},children:"依頼一覧"})]})}),"form"===s&&(0,r.jsx)("form",{onSubmit:N(A),children:(0,r.jsxs)("div",{className:"glass-card p-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"画像アップロード"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:["image1","image2","image3"].map((t,s)=>(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium",children:["画像",s+1,0===s?" *":""]}),(0,r.jsxs)("div",{className:`upload-area h-40 flex items-center justify-center relative overflow-hidden rounded-lg ${e[t]?"has-image":""}`,children:[(0,r.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>C(t,e.target.files),id:`image-${s+1}`}),e[t]?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.default,{width:200,height:150,src:e[t],alt:`Preview ${s+1}`,className:"image-preview object-cover rounded-lg w-full h-full",style:{width:"100%",height:"100%",padding:"10px"}}),(0,r.jsx)("div",{className:"upload-overlay",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,r.jsx)("label",{htmlFor:`image-${s+1}`,className:"change-image-text cursor-pointer bg-black bg-opacity-50 px-2 py-1 rounded text-white text-xs",children:"画像を変更"}),(0,r.jsx)("button",{type:"button",onClick:()=>q(t),className:"text-red-400 text-sm hover:text-red-300 bg-black bg-opacity-50 px-2 py-1 rounded",children:"削除"})]})})]}):(0,r.jsx)("label",{htmlFor:`image-${s+1}`,className:"cursor-pointer text-center w-full h-full flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-sm text-gray-300",children:[(0,r.jsx)("div",{className:"mb-2 text-2xl",children:"\uD83D\uDCF8"}),(0,r.jsx)("div",{children:"クリックして画像を選択"})]})})]}),D(t)&&(0,r.jsx)("p",{className:"error-message",children:D(t)})]},t))})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"加工したい内容 *"}),(0,r.jsx)("textarea",{...w("processingContent"),className:"glass-input w-full p-3 h-32 resize-none",placeholder:"加工内容の詳細を入力してください"}),_.processingContent&&(0,r.jsx)("p",{className:"error-message",children:_.processingContent.message})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"引継ぎ事項"}),(0,r.jsx)("textarea",{...w("referenceInfo"),className:"glass-input w-full p-3 h-24 resize-none",placeholder:"特記事項があれば入力してください"})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"納品希望日 *"}),(0,r.jsx)("input",{type:"date",...w("completionDate"),className:"glass-input w-full p-3"}),_.completionDate&&(0,r.jsx)("p",{className:"error-message",children:_.completionDate.message})]}),(0,r.jsx)(o.A,{type:"submit",variant:"glassBrand",className:"w-full",children:"依頼を送信"})]})}),"list"===s&&(0,r.jsxs)("div",{className:"glass-card p-8",children:[(0,r.jsx)("h2",{className:"text-lg text-center font-semibold mb-4",children:"依頼一覧"}),b?(0,r.jsx)(h.A,{}):v?(0,r.jsx)("div",{className:"text-red-500",children:v}):0===f.length?(0,r.jsx)("div",{children:"依頼がありません。"}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:f.map(e=>(0,r.jsxs)("div",{className:"rounded-xl bg-white/10 backdrop-blur-md border border-white/20 shadow-lg hover:shadow-xl hover:border-blue-400 transition-all p-6 flex flex-col gap-3 text-white",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"text-blue-400 font-semibold text-base flex items-center gap-2",children:[(0,r.jsx)(x.A,{className:"w-5 h-5"}),e.description]}),(0,r.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-semibold shadow-sm ${"completed"===e.request_status?"bg-gradient-to-r from-green-400 to-green-600":"pending"===e.request_status?"bg-gradient-to-r from-yellow-400 to-yellow-600":"bg-gradient-to-r from-blue-400 to-blue-600"}`,children:e.request_status})]}),e.special_note&&(0,r.jsxs)("div",{className:"text-sm text-gray-300",children:[(0,r.jsx)("span",{className:"font-medium text-white",children:"Note:"})," ",e.special_note]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[(0,r.jsx)("span",{className:"font-medium text-white",children:"Delivery:"}),(0,r.jsx)("span",{children:new Date(e.desire_delivery_date).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})})]}),Array.isArray(e.request_files)&&e.request_files.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:e.request_files.map((e,t)=>(0,r.jsxs)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"inline-block bg-white/10 hover:bg-white/20 text-white border border-white/30 px-3 py-1 rounded-md text-xs font-mono truncate max-w-[140px] transition-all",children:["Image ",t+1]},t))})]},e.uid))})]})]})}),(0,r.jsx)(p.N9,{})]})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79551:e=>{"use strict";e.exports=require("url")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[4447,6099,1658,3153,3853,7605,2212,2348,474,6064],()=>s(43064));module.exports=r})();