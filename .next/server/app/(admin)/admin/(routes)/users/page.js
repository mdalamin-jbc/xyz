(()=>{var e={};e.id=2394,e.ids=[2394],e.modules={297:(e,s,r)=>{Promise.resolve().then(r.bind(r,10734))},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3335:(e,s,r)=>{"use strict";function t(){return{"Content-Type":"application/json"}}r.d(s,{z:()=>t})},5957:(e,s,r)=>{"use strict";r.d(s,{A:()=>d});var t=r(60687);r(43210);var a=r(14952),n=r(32192),i=r(85814),l=r.n(i);let d=({items:e,separator:s=(0,t.jsx)(a.A,{className:"w-4 h-4 text-gray-400"}),className:r="",showHome:i=!0,homeLabel:d="ホーム",homeHref:o="/"})=>{let c=i?[{label:d,href:o,icon:(0,t.jsx)(n.A,{className:"w-4 h-4"})},...e]:e;return(0,t.jsx)("nav",{className:`flex items-center space-x-1 text-sm ${r}`,"aria-label":"Breadcrumb",children:(0,t.jsx)("ol",{className:"flex items-center space-x-1",children:c.map((e,r)=>{let a=r===c.length-1,n=e.isActive||a;return(0,t.jsxs)("li",{className:"flex items-center",children:[r>0&&(0,t.jsx)("span",{className:"mx-2 flex-shrink-0",children:s}),e.href&&!n?(0,t.jsx)(l(),{href:e.href,children:(0,t.jsxs)("p",{className:"flex items-center  text-gray-600 hover:text-gray-900 transition-colors duration-200 px-1 py-1 rounded-md hover:bg-gray-100",children:[e.icon,(0,t.jsx)("span",{children:e.label})]})}):(0,t.jsxs)("span",{className:`flex items-center gap-1 px-2 py-1 rounded-md ${n?"text-blue-600 bg-blue-50 font-medium":"text-gray-500"}`,children:[e.icon,(0,t.jsx)("span",{children:e.label})]})]},r)})})})}},10734:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/roushan-sheik/Projects/Office /project-xyz/1-jul/xyz/src/app/(admin)/admin/(routes)/users/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/roushan-sheik/Projects/Office /project-xyz/1-jul/xyz/src/app/(admin)/admin/(routes)/users/page.tsx","default")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},42153:(e,s,r)=>{Promise.resolve().then(r.bind(r,61512))},61512:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>_});var t=r(60687),a=r(51423),n=r(96067),i=r(3335);class l{async getAdminUsers(){let e=await fetch(`${this.apiUrl}/users`,{method:"GET",headers:(0,i.z)(),credentials:"include"});if(!e.ok)throw Error("ユーザーデータの取得に失敗しました");return(await e.json()).results}constructor(){this.apiUrl=n.p}}let d=new l,o=()=>(0,a.I)({queryKey:["admin-users"],queryFn:async()=>await d.getAdminUsers(),staleTime:3e5,refetchOnWindowFocus:!1});var c=r(43210),x=r.n(c),m=r(5336),p=r(35071),h=r(64398),u=r(38038),g=r(63826),b=r(47033),j=r(14952),y=r(16145),f=r(58869),N=r(99270),w=r(41550),v=r(5957);let A=({status:e,type:s})=>{let r=(()=>{switch(s){case"active":return e?{color:"bg-green-100 text-green-700 border-green-200",icon:m.A,text:"有効"}:{color:"bg-red-100 text-red-700 border-red-200",icon:p.A,text:"無効"};case"verified":return e?{color:"bg-blue-100 text-blue-700 border-blue-200",icon:m.A,text:"認証済"}:{color:"bg-gray-100 text-gray-600 border-gray-200",icon:p.A,text:"未認証"};case"subscribed":return!0===e||"true"===e?{color:"bg-yellow-100 text-yellow-700 border-yellow-200",icon:h.A,text:"サブスク中"}:{color:"bg-gray-100 text-gray-600 border-gray-200",icon:p.A,text:"未サブスク"};default:return{color:"bg-gray-100 text-gray-600 border-gray-200",icon:p.A,text:"N/A"}}})(),a=r.icon;return(0,t.jsxs)("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium border ${r.color}`,children:[(0,t.jsx)(a,{className:"w-3 h-3"}),r.text]})},P=({role:e})=>{let s=(()=>{switch(e){case"ADMIN":return{color:"bg-purple-100 text-purple-700 border-purple-200",text:"ADMIN"};case"MODERATOR":return{color:"bg-orange-100 text-orange-700 border-orange-200",text:"MODERATOR"};case"END_USER":return{color:"bg-green-100 text-green-700 border-green-200",text:"END USER"};case"USER":return{color:"bg-green-100 text-green-700 border-green-200",text:"USER"};default:return{color:"bg-gray-100 text-gray-600 border-gray-200",text:e||"UNKNOWN"}}})();return(0,t.jsxs)("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium border ${s.color}`,children:[(0,t.jsx)(u.A,{className:"w-3 h-3"}),s.text]})},k=({currentPage:e,totalPages:s,onPageChange:r})=>{let a=s>1?(()=>{let r=[],t=[];for(let t=Math.max(2,e-2);t<=Math.min(s-1,e+2);t++)r.push(t);return e-2>2?t.push(1,"..."):t.push(1),t.push(...r),e+2<s-1?t.push("...",s):t.push(s),t})():[];return s<=1?null:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 sm:px-6 py-4 bg-gray-50  border-gray-300 border-t",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-600 order-2 sm:order-1",children:["ページ ",e," / ",s]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 order-1 sm:order-2",children:[(0,t.jsx)("button",{onClick:()=>r(1),disabled:1===e,className:"p-2 rounded-lg border border-gray-300 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors hidden sm:flex items-center justify-center",title:"最初のページ",children:(0,t.jsx)(g.A,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>r(e-1),disabled:1===e,className:"p-2 rounded-lg border border-gray-300 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",title:"前のページ",children:(0,t.jsx)(b.A,{className:"w-4 h-4"})}),(0,t.jsx)("div",{className:"flex items-center gap-1",children:a.map((s,a)=>(0,t.jsx)(x().Fragment,{children:"..."===s?(0,t.jsx)("span",{className:"px-3 py-2 text-gray-500 hidden sm:inline",children:"..."}):(0,t.jsx)("button",{onClick:()=>r(s),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors min-w-[40px] ${e===s?"bg-blue-600 text-white border border-blue-600":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:s})},a))}),(0,t.jsx)("button",{onClick:()=>r(e+1),disabled:e===s,className:"p-2 rounded-lg border border-gray-300 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",title:"次のページ",children:(0,t.jsx)(j.A,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>r(s),disabled:e===s,className:"p-2 rounded-lg border border-gray-300 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors hidden sm:flex items-center justify-center",title:"最後のページ",children:(0,t.jsx)(y.A,{className:"w-4 h-4"})})]})]})},_=()=>{let[e,s]=(0,c.useState)(""),[r,a]=(0,c.useState)(1),{data:n,isLoading:i,isError:l,error:d}=o(),{filtered:m,paginatedUsers:p,totalPages:g}=(0,c.useMemo)(()=>{let s=n?.filter(s=>s.email.toLowerCase().includes(e.toLowerCase())||s.kind&&s.kind.toLowerCase().includes(e.toLowerCase())),t=Math.ceil((s?.length||0)/5),a=(r-1)*5,i=s?.slice(a,a+5);return{filtered:s,paginatedUsers:i,totalPages:t}},[n,e,r]);return(x().useEffect(()=>{a(1)},[e]),i)?(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border-2 border-gray-300",children:[(0,t.jsx)("div",{className:"p-6 border-b border-gray-300",children:(0,t.jsx)("div",{className:"h-6 bg-gray-200 rounded w-32 animate-pulse"})}),(0,t.jsx)("div",{className:"p-6",children:[...Array(6)].map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center py-4 border-b last:border-b-0 border-gray-300",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-48 animate-pulse mr-6"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-20 animate-pulse mr-6"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-16 animate-pulse mr-6"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-16 animate-pulse mr-6"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-20 animate-pulse"})]},s))})]})}):l?(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:(0,t.jsxs)("p",{className:"text-red-600",children:["エラー: ",d?.message||"データを読み込めません"]})})}):(0,t.jsx)("div",{className:"lg:p-4  bg-white",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8  min-h-screen",children:[(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsx)(v.A,{items:[{label:"ユーザー管理",href:"/admin"}],homeHref:"/admin"})}),(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"ユーザー管理"}),(0,t.jsx)("p",{className:"text-gray-600",children:"システム内のすべてのユーザーを管理・監視できます"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-300 overflow-hidden",children:[(0,t.jsx)("div",{className:"p-6 border-b  border-gray-300 bg-gray-50",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-700",children:[(0,t.jsx)(f.A,{className:"w-5 h-5"}),(0,t.jsxs)("span",{className:"font-medium",children:["総ユーザー数: ",m?.length||0]})]}),(0,t.jsxs)("div",{className:"relative w-full sm:w-80",children:[(0,t.jsx)(N.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,t.jsx)("input",{type:"text",value:e,onChange:e=>s(e.target.value),placeholder:"メールアドレス・権限で検索...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-colors"})]})]})}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50 border-b  border-gray-200",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(w.A,{className:"w-4 h-4"}),"メールアドレス"]})}),(0,t.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.A,{className:"w-4 h-4"}),"権限"]})}),(0,t.jsx)("th",{className:"px-6 py-4 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"アクティブ"}),(0,t.jsx)("th",{className:"px-6 py-4 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"認証状態"}),(0,t.jsx)("th",{className:"px-6 py-4 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider",children:(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,t.jsx)(h.A,{className:"w-4 h-4"}),"サブスク"]})})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:p&&p.length>0?p.map((e,s)=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,t.jsx)(f.A,{className:"w-4 h-4 text-blue-600"})}),(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.email})})]})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)(P,{role:e.kind})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,t.jsx)(A,{status:e.is_active,type:"active"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,t.jsx)(A,{status:e.is_verified,type:"verified"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,t.jsx)(A,{status:e.is_subscribed,type:"subscribed"})})]},e.email)):(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:5,className:"px-6 py-12 text-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,t.jsx)(f.A,{className:"w-12 h-12 text-gray-300"}),(0,t.jsxs)("div",{className:"text-gray-500",children:[(0,t.jsx)("p",{className:"text-lg font-medium",children:"ユーザーが見つかりません"}),(0,t.jsx)("p",{className:"text-sm",children:"検索条件を変更してお試しください"})]})]})})})})]})}),(0,t.jsx)(k,{currentPage:r,totalPages:g,onPageChange:e=>{a(e),window.scrollTo({top:0,behavior:"smooth"})}}),m&&m.length>0&&(0,t.jsx)("div",{className:"px-4 sm:px-6 py-4 bg-gray-50 border-t  border-gray-300",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 text-sm text-gray-600",children:[(0,t.jsxs)("span",{className:"font-medium text-center sm:text-left",children:[(r-1)*5+1," -"," ",Math.min(5*r,m.length)," /"," ",m.length," 件のユーザーが表示されています"]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-center sm:justify-end gap-3 sm:gap-4",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1 bg-white px-2 py-1 rounded-md shadow-sm",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),(0,t.jsxs)("span",{className:"text-xs sm:text-sm",children:["アクティブ: ",m.filter(e=>e.is_active).length]})]}),(0,t.jsxs)("span",{className:"flex items-center gap-1 bg-white px-2 py-1 rounded-md shadow-sm",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),(0,t.jsxs)("span",{className:"text-xs sm:text-sm",children:["認証済: ",m.filter(e=>e.is_verified).length]})]}),(0,t.jsxs)("span",{className:"flex items-center gap-1 bg-white px-2 py-1 rounded-md shadow-sm",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),(0,t.jsxs)("span",{className:"text-xs sm:text-sm",children:["サブスク:"," ",m.filter(e=>!0===e.is_subscribed||"true"===e.is_subscribed).length]})]})]})]})})]})]})})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79551:e=>{"use strict";e.exports=require("url")},92792:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>o});var t=r(65239),a=r(48088),n=r(88170),i=r.n(n),l=r(30893),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);r.d(s,d);let o={children:["",{children:["(admin)",{children:["admin",{children:["(routes)",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,10734)),"/home/roushan-sheik/Projects/Office /project-xyz/1-jul/xyz/src/app/(admin)/admin/(routes)/users/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,88346)),"/home/roushan-sheik/Projects/Office /project-xyz/1-jul/xyz/src/app/(admin)/admin/layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,92194)),"/home/roushan-sheik/Projects/Office /project-xyz/1-jul/xyz/src/app/(admin)/admin/loading.tsx"]}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,35286)),"/home/roushan-sheik/Projects/Office /project-xyz/1-jul/xyz/src/app/layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,67393)),"/home/roushan-sheik/Projects/Office /project-xyz/1-jul/xyz/src/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/roushan-sheik/Projects/Office /project-xyz/1-jul/xyz/src/app/(admin)/admin/(routes)/users/page.tsx"],x={require:r,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(admin)/admin/(routes)/users/page",pathname:"/admin/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},96067:(e,s,r)=>{"use strict";r.d(s,{p:()=>t});let t="https://api-dev.examplesite.jp"}};var s=require("../../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[4447,6099,1658,3153,5814,880,1423,4546],()=>r(92792));module.exports=t})();